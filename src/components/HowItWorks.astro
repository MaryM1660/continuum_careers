---
const steps = [
  {
    number: '01',
    title: 'Deep Discovery',
    description: 'Through voice conversations, we learn your real story â€” not bullet points, but actual cases: projects you led, problems you solved, decisions you made. Everything gets structured and tagged automatically.',
    visual: 'discovery',
    color: 'magenta',
  },
  {
    number: '02',
    title: 'Career Strategy',
    description: 'We help you develop a clear strategy â€” in several directions at once. Each variant gets its own narrative, its own priorities. You see the trade-offs and decide where to aim.',
    visual: 'architecture',
    color: 'amber',
  },
  {
    number: '03',
    title: 'Documents & Prep',
    description: 'Resumes and cover letters built from your real cases â€” not keywords. Mock interviews calibrated to your target roles. You walk in knowing your story inside out.',
    visual: 'cases',
    color: 'magenta',
  },
  {
    number: '04',
    title: 'Launch & Beyond',
    description: 'Targeted applications, not mass-sending. And when you land the role â€” we stay. Meeting prep, achievement communication, promotion strategy.',
    visual: 'beyond',
    color: 'amber',
  },
];
---

<section id="how-it-works" class="section-padding">
  <div class="container-narrow mx-auto">
    <!-- Section header -->
    <div class="text-center max-w-3xl mx-auto mb-20">
      <p data-animate class="text-sm font-semibold uppercase tracking-wider text-brand-amber mb-4">How It Works</p>
      <h2 data-animate class="text-3xl sm:text-4xl lg:text-5xl font-extrabold tracking-tight mb-6 stagger-1">
        From "where do I even start" to<br />
        <span class="gradient-text-reverse">landing the right role</span>
      </h2>
    </div>

    <!-- Steps -->
    <div class="relative">
      <!-- Connecting line -->
      <div class="hidden lg:block absolute left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-brand-magenta via-brand-amber to-brand-magenta opacity-20"></div>

      <div class="space-y-16 lg:space-y-24">
        {steps.map((step, i) => (
          <div
            data-animate
            class={`relative grid lg:grid-cols-2 gap-8 lg:gap-16 items-center ${i % 2 === 1 ? 'lg:direction-rtl' : ''}`}
          >
            <!-- Content -->
            <div class={`${i % 2 === 1 ? 'lg:order-2 lg:text-left' : ''}`}>
              <div class="flex items-center gap-4 mb-4">
                <span class={`text-5xl font-black ${step.color === 'magenta' ? 'text-brand-magenta/40 dark:text-brand-magenta/30' : 'text-brand-amber/40 dark:text-brand-amber/30'}`}>
                  {step.number}
                </span>
                <div class={`h-px flex-1 ${step.color === 'magenta' ? 'bg-brand-magenta/20' : 'bg-brand-amber/20'}`}></div>
              </div>
              <h3 class="text-2xl sm:text-3xl font-bold text-cosmos-900 dark:text-white mb-4">
                {step.title}
              </h3>
              <p class="text-lg text-cosmos-500 dark:text-cosmos-400 leading-relaxed">
                {step.description}
              </p>
            </div>

            <!-- Visual -->
            <div class={`${i % 2 === 1 ? 'lg:order-1' : ''}`}>
              <div class={`relative rounded-3xl overflow-hidden aspect-[4/3]
                bg-gradient-to-br
                ${step.color === 'magenta'
                  ? 'from-brand-magenta/5 to-brand-coral/5 dark:from-brand-magenta/10 dark:to-brand-coral/10 border border-brand-magenta/10'
                  : 'from-brand-amber/5 to-brand-amber/5 dark:from-brand-amber/10 dark:to-brand-amber/10 border border-brand-amber/10'}
                flex items-center justify-center`}
              >
                {step.visual === 'discovery' && (
                  <div class="p-6 w-full max-w-sm mx-auto">
                    <!-- Voice session UI -->
                    <div class="bg-white dark:bg-cosmos-800 rounded-xl shadow-lg p-5 mb-3">
                      <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-brand-magenta to-brand-coral flex items-center justify-center">
                          <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/></svg>
                        </div>
                        <div class="flex-1">
                          <p class="text-xs font-bold text-cosmos-800 dark:text-cosmos-200">Session 3 Â· Deep Dive</p>
                          <p class="text-[10px] text-cosmos-400">Understanding your real role evolution</p>
                        </div>
                        <span class="flex items-center gap-1 text-[10px] text-brand-magenta font-medium"><span class="w-1.5 h-1.5 rounded-full bg-brand-magenta animate-pulse"></span> Live</span>
                      </div>
                      <!-- Waveform -->
                      <div class="flex items-center justify-center gap-0.5 h-10 mb-3">
                        {Array.from({length: 20}).map((_, j) => (
                          <div class="w-0.5 bg-brand-magenta/50 rounded-full voice-bar-sm" style={`animation-delay: ${j * 0.06}s;`}></div>
                        ))}
                      </div>
                      <p class="text-[11px] text-cosmos-500 dark:text-cosmos-400 italic">"So your title stayed the same, but it sounds like your actual role changed completely..."</p>
                    </div>
                    <!-- Insights being extracted -->
                    <div class="space-y-2">
                      {[
                        { label: 'Hidden strength', detail: 'Cross-team influence' },
                        { label: 'Overlooked skill', detail: 'Process design' },
                      ].map((insight) => (
                        <div class="flex items-center gap-2 bg-brand-magenta/5 dark:bg-brand-magenta/10 rounded-lg px-3 py-2 border border-brand-magenta/10">
                          <svg class="w-3.5 h-3.5 text-brand-magenta flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>
                          <div>
                            <span class="text-[10px] font-bold text-brand-magenta">{insight.label}</span>
                            <span class="text-[10px] text-cosmos-500 dark:text-cosmos-400"> Â· {insight.detail}</span>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
                {step.visual === 'architecture' && (
                  <div class="p-6 w-full max-w-sm mx-auto">
                    <!-- Career tracks -->
                    <div class="space-y-2.5 mb-4">
                      {[
                        { track: 'People Leadership', cases: 8, show: ['Leadership', 'Team Building'], hide: ['Narrow Focus'], fit: 92 },
                        { track: 'Senior Specialist', cases: 6, show: ['Deep Expertise', 'Mentoring'], hide: ['Management'], fit: 78 },
                        { track: 'Strategic Pivot', cases: 5, show: ['Strategy', 'Stakeholders'], hide: ['Execution'], fit: 65 },
                      ].map((t, j) => (
                        <div class="bg-white dark:bg-cosmos-800 rounded-xl shadow-sm p-3.5 border border-cosmos-100 dark:border-cosmos-700">
                          <div class="flex items-center justify-between mb-2">
                            <span class="text-[11px] font-bold text-cosmos-800 dark:text-cosmos-200">{t.track}</span>
                            <span class={`text-[10px] font-bold ${j === 0 ? 'text-brand-magenta' : j === 1 ? 'text-brand-amber' : 'text-brand-coral'}`}>{t.fit}% fit</span>
                          </div>
                          <div class="w-full h-1.5 bg-cosmos-100 dark:bg-cosmos-700 rounded-full overflow-hidden mb-2">
                            <div class={`h-full rounded-full ${j === 0 ? 'bg-brand-magenta' : j === 1 ? 'bg-brand-amber' : 'bg-brand-coral'}`} style={`width: ${t.fit}%;`}></div>
                          </div>
                          <div class="flex items-center gap-1.5 flex-wrap">
                            {t.show.map((s) => (
                              <span class="px-1.5 py-0.5 rounded text-[8px] font-medium bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400">+ {s}</span>
                            ))}
                            {t.hide.map((h) => (
                              <span class="px-1.5 py-0.5 rounded text-[8px] font-medium bg-red-50 dark:bg-red-900/20 text-red-500 dark:text-red-400">âˆ’ {h}</span>
                            ))}
                            <span class="text-[8px] text-cosmos-400">{t.cases} cases</span>
                          </div>
                        </div>
                      ))}
                    </div>
                    <div class="flex items-center gap-2 px-2">
                      <div class="w-2 h-2 rounded-full bg-brand-amber animate-pulse"></div>
                      <p class="text-[10px] text-cosmos-500 dark:text-cosmos-400 italic">Same person, three completely different narratives</p>
                    </div>
                  </div>
                )}
                {step.visual === 'cases' && (
                  <div class="p-5 w-full max-w-sm mx-auto space-y-3">
                    <!-- Case cards -->
                    <div class="bg-white dark:bg-cosmos-800 rounded-xl shadow-lg p-4">
                      <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-2">
                          <div class="w-8 h-8 rounded-lg bg-brand-magenta/10 flex items-center justify-center">
                            <svg class="w-4 h-4 text-brand-magenta" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155" /></svg>
                          </div>
                          <div>
                            <p class="text-[11px] font-bold text-cosmos-800 dark:text-cosmos-200">Your Stories</p>
                            <p class="text-[10px] text-cosmos-400">12 stories structured</p>
                          </div>
                        </div>
                      </div>
                      <!-- Case items -->
                      <div class="space-y-2">
                        {[
                          { case: 'Rescued a project everyone had written off', tracks: ['Lead', 'Expert'], type: 'Leadership' },
                          { case: 'Spotted the problem no one else saw', tracks: ['Strategy', 'Lead'], type: 'Impact' },
                          { case: 'Built and grew a team from scratch', tracks: ['Lead'], type: 'People' },
                        ].map((c) => (
                          <div class="rounded-lg bg-cosmos-50 dark:bg-cosmos-700/30 p-2.5">
                            <p class="text-[10px] font-medium text-cosmos-700 dark:text-cosmos-300 mb-1.5">{c.case}</p>
                            <div class="flex items-center gap-1.5">
                              <span class="px-1.5 py-0.5 rounded text-[8px] font-medium bg-brand-magenta/10 text-brand-magenta">{c.type}</span>
                              {c.tracks.map((tr) => (
                                <span class="px-1.5 py-0.5 rounded text-[8px] font-medium bg-brand-amber/10 text-brand-amber">{tr}</span>
                              ))}
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>
                    <!-- Mock interview indicator -->
                    <div class="bg-white dark:bg-cosmos-800 rounded-xl shadow-lg p-3 flex items-center gap-3">
                      <div class="w-9 h-9 rounded-lg bg-brand-coral/10 flex items-center justify-center flex-shrink-0">
                        <svg class="w-4 h-4 text-brand-coral" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg>
                      </div>
                      <div class="flex-1">
                        <p class="text-[11px] font-bold text-cosmos-800 dark:text-cosmos-200">Mock Interview Â· Leadership</p>
                        <p class="text-[10px] text-cosmos-400">Behavioral round Â· Ready</p>
                      </div>
                    </div>
                  </div>
                )}
                {step.visual === 'beyond' && (
                  <div class="p-5 w-full max-w-sm mx-auto">
                    <!-- Timeline -->
                    <div class="relative pl-6 space-y-4">
                      <div class="absolute left-2 top-2 bottom-2 w-px bg-gradient-to-b from-brand-magenta via-brand-amber to-brand-coral"></div>
                      {[
                        { phase: 'Job Search', detail: 'Targeted applications from your profile', time: 'Month 1-2', icon: 'ðŸŽ¯', done: true },
                        { phase: 'Landed the Role', detail: 'The right offer, accepted', time: 'Month 3', icon: 'âœ“', done: true },
                        { phase: 'Settling In', detail: '1:1 prep, stakeholder mapping', time: 'Month 4-6', icon: 'â—†', done: true },
                        { phase: 'First Promotion', detail: 'Achievement communication', time: 'Year 1', icon: 'â†‘', done: false },
                        { phase: 'Next Chapter', detail: 'Profile updated, new paths ready', time: 'Ongoing', icon: 'âˆž', done: false },
                      ].map((item, j) => (
                        <div class="relative flex items-start gap-3">
                          <div class={`absolute -left-6 w-4 h-4 rounded-full border-2 flex items-center justify-center text-[8px]
                            ${item.done
                              ? 'bg-brand-magenta border-brand-magenta text-white'
                              : 'bg-white dark:bg-cosmos-800 border-brand-amber/40 text-brand-amber'}`}>
                            {item.done && <svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>}
                          </div>
                          <div class={`bg-white dark:bg-cosmos-800 rounded-lg p-2.5 shadow-sm border flex-1
                            ${item.done ? 'border-cosmos-100 dark:border-cosmos-700' : 'border-dashed border-cosmos-200 dark:border-cosmos-700'}`}>
                            <div class="flex items-center justify-between mb-0.5">
                              <span class="text-[11px] font-bold text-cosmos-800 dark:text-cosmos-200">{item.phase}</span>
                              <span class="text-[9px] text-cosmos-400">{item.time}</span>
                            </div>
                            <p class="text-[10px] text-cosmos-500 dark:text-cosmos-400">{item.detail}</p>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  .voice-bar-sm {
    height: 6px;
    animation: voice-wave-sm 1s ease-in-out infinite;
  }

  @keyframes voice-wave-sm {
    0%, 100% { height: 6px; }
    50% { height: 32px; }
  }
</style>
