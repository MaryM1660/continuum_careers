---
const steps = [
  {
    number: '01',
    title: 'Voice Discovery',
    description: 'Have a natural conversation with our AI. It asks the right questions to uncover your achievements, leadership moments, and technical decisions — things you wouldn\'t think to put on a resume.',
    visual: 'mic',
    color: 'teal',
  },
  {
    number: '02',
    title: 'Strategic Planning',
    description: 'Get 4 career strategies: Ideal, Realistic, Compromise, and Anti-plan. Each with a clear positioning narrative, target roles, and companies matched to your profile.',
    visual: 'plan',
    color: 'amber',
  },
  {
    number: '03',
    title: 'Materials & Preparation',
    description: 'AI generates tailored resumes, gap assessments, and interview preparation for each track. Your Resume Studio keeps everything versioned and target-specific.',
    visual: 'doc',
    color: 'teal',
  },
  {
    number: '04',
    title: 'Pipeline & Networking',
    description: 'Track your applications across 12 stages from discovery to offer. Get warm intro strategies and know exactly who to reach out to — and what to say.',
    visual: 'pipeline',
    color: 'amber',
  },
];
---

<section id="how-it-works" class="section-padding">
  <div class="container-narrow mx-auto">
    <!-- Section header -->
    <div class="text-center max-w-3xl mx-auto mb-20">
      <p data-animate class="text-sm font-semibold uppercase tracking-wider text-brand-amber mb-4">How It Works</p>
      <h2 data-animate class="text-3xl sm:text-4xl lg:text-5xl font-extrabold tracking-tight mb-6 stagger-1">
        From voice to offer in<br />
        <span class="gradient-text-reverse">four intelligent steps</span>
      </h2>
    </div>

    <!-- Steps -->
    <div class="relative">
      <!-- Connecting line -->
      <div class="hidden lg:block absolute left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-brand-teal via-brand-amber to-brand-teal opacity-20"></div>

      <div class="space-y-16 lg:space-y-24">
        {steps.map((step, i) => (
          <div
            data-animate
            class={`relative grid lg:grid-cols-2 gap-8 lg:gap-16 items-center ${i % 2 === 1 ? 'lg:direction-rtl' : ''}`}
          >
            <!-- Content -->
            <div class={`${i % 2 === 1 ? 'lg:order-2 lg:text-left' : ''}`}>
              <div class="flex items-center gap-4 mb-4">
                <span class={`text-5xl font-black ${step.color === 'teal' ? 'text-brand-teal/20 dark:text-brand-teal/15' : 'text-brand-amber/20 dark:text-brand-amber/15'}`}>
                  {step.number}
                </span>
                <div class={`h-px flex-1 ${step.color === 'teal' ? 'bg-brand-teal/20' : 'bg-brand-amber/20'}`}></div>
              </div>
              <h3 class="text-2xl sm:text-3xl font-bold text-cosmos-900 dark:text-white mb-4">
                {step.title}
              </h3>
              <p class="text-lg text-cosmos-500 dark:text-cosmos-400 leading-relaxed">
                {step.description}
              </p>
            </div>

            <!-- Visual -->
            <div class={`${i % 2 === 1 ? 'lg:order-1' : ''}`}>
              <div class={`relative rounded-3xl overflow-hidden aspect-[4/3]
                bg-gradient-to-br
                ${step.color === 'teal'
                  ? 'from-brand-teal/5 to-brand-cyan/5 dark:from-brand-teal/10 dark:to-brand-cyan/10 border border-brand-teal/10'
                  : 'from-brand-amber/5 to-brand-amber/5 dark:from-brand-amber/10 dark:to-brand-amber/10 border border-brand-amber/10'}
                flex items-center justify-center`}
              >
                {step.visual === 'mic' && (
                  <div class="text-center">
                    <div class={`w-20 h-20 mx-auto rounded-full flex items-center justify-center mb-4 ${step.color === 'teal' ? 'bg-brand-teal/15' : 'bg-brand-amber/15'}`}>
                      <svg class={`w-10 h-10 ${step.color === 'teal' ? 'text-brand-teal' : 'text-brand-amber'}`} fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z" />
                      </svg>
                    </div>
                    <div class="flex justify-center gap-1">
                      {Array.from({length: 12}).map((_, j) => (
                        <div class="w-1 bg-brand-teal/60 rounded-full voice-bar-sm" style={`animation-delay: ${j * 0.08}s;`}></div>
                      ))}
                    </div>
                    <p class="text-sm text-cosmos-500 dark:text-cosmos-400 mt-4">"Tell me about your biggest technical decision..."</p>
                  </div>
                )}
                {step.visual === 'plan' && (
                  <div class="grid grid-cols-2 gap-3 p-6 w-full max-w-sm">
                    {['Ideal Plan', 'Realistic Plan', 'Compromise', 'Anti-Plan'].map((plan, j) => (
                      <div class={`rounded-xl p-4 text-center text-sm font-medium
                        ${j === 0 ? 'bg-brand-teal/15 text-brand-teal border border-brand-teal/20' :
                          j === 1 ? 'bg-brand-amber/15 text-brand-amber border border-brand-amber/20' :
                          j === 2 ? 'bg-cosmos-200/50 dark:bg-cosmos-700/50 text-cosmos-600 dark:text-cosmos-300 border border-cosmos-200 dark:border-cosmos-700' :
                          'bg-red-50 dark:bg-red-900/20 text-red-500 border border-red-200 dark:border-red-800/30'}`}
                      >
                        {plan}
                      </div>
                    ))}
                  </div>
                )}
                {step.visual === 'doc' && (
                  <div class="p-6 w-full max-w-xs">
                    <div class="bg-white dark:bg-cosmos-800 rounded-xl shadow-lg p-5 space-y-3">
                      <div class="flex items-center gap-2">
                        <div class="w-2 h-2 rounded-full bg-brand-teal"></div>
                        <div class="h-2 bg-cosmos-200 dark:bg-cosmos-700 rounded w-2/3"></div>
                      </div>
                      <div class="h-2 bg-cosmos-100 dark:bg-cosmos-700/50 rounded w-full"></div>
                      <div class="h-2 bg-cosmos-100 dark:bg-cosmos-700/50 rounded w-5/6"></div>
                      <div class="h-2 bg-cosmos-100 dark:bg-cosmos-700/50 rounded w-4/6"></div>
                      <div class="mt-4 flex gap-2">
                        <span class="px-2 py-1 rounded text-[10px] font-medium bg-brand-teal/10 text-brand-teal">IC Lead</span>
                        <span class="px-2 py-1 rounded text-[10px] font-medium bg-brand-amber/10 text-brand-amber">v2.1</span>
                      </div>
                    </div>
                  </div>
                )}
                {step.visual === 'pipeline' && (
                  <div class="p-4 w-full overflow-x-auto">
                    <div class="flex gap-2 min-w-max">
                      {['Discovery', 'Applied', 'Screen', 'Interview', 'Offer'].map((stage, j) => (
                        <div class="flex flex-col items-center gap-1">
                          <div class={`w-12 h-12 rounded-xl flex items-center justify-center text-xs font-bold
                            ${j <= 2 ? 'bg-brand-amber/15 text-brand-amber' : 'bg-cosmos-200/50 dark:bg-cosmos-700/50 text-cosmos-400 dark:text-cosmos-500'}`}>
                            {j <= 2 ? j + 1 : '—'}
                          </div>
                          <span class="text-[10px] text-cosmos-500 dark:text-cosmos-400">{stage}</span>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  .voice-bar-sm {
    height: 6px;
    animation: voice-wave-sm 1s ease-in-out infinite;
  }

  @keyframes voice-wave-sm {
    0%, 100% { height: 6px; }
    50% { height: 32px; }
  }
</style>
